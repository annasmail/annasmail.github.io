---
title: Anna Smail
layout: postlayout
---
<postheader>
      <div class="prev">
        <a href="/Personal/GraphicDesign" class="prevgrid">
          <div class="prevgrid1">
          </div>
          prev.
        </a>
</div>  
<div class="posttitle">
        <h2> Pandas and Dataframes </h2>
        <p4>Using Python library <i>Pandas</i> to analyse and display data from a dataframe!</p4>
</div>    
<div class="next">
        <a href="/Personal/KingsAndQueens" class="nextgrid">
        next  
	<div class="nextgrid1">
	  </div>
        </a>
</div>    
</postheader>

<div class="comments">
	<h20>Preparing the dataframe</h20>
	<br>
	I have compiled a spreadsheet of all the books I have read since 2021 with information such as
	when it was read, its' genre, a rating out of 5 and the number of pages. It is used as an example in this post 
	to show some of the uses of the python library, <b>Pandas</b>, when analysing and displaying data in dataframes. 
	<br>
	<p20>First, I'll import the libraries I will be needing as well as the <code>font_manager</code> so that I can customise the font 
	on any plots I make. Also, for this project I chose to work in Google Colab, so I need to <code>import drive</code>
	to access files located in my Google Drive.</p20> 
</div>
<div class="code">
	import <b>pandas</b> as pd <hash># library for managing dataframes</hash> <br> 
	import <b>numpy</b> as np <hash># library for mathematical functions </hash> <br>
<br>
	import <b>matplotlib</b> as mpl <hash># library for plotting data</hash><br>
	import <b>matplotlib.pyplot</b> as plt  <br>
	import <b>matplotlib.font_manager</b> as fm <hash># managing fonts</hash><br>
<br>
	from <b>google.colab</b> import <b>drive</b> <hash># connect to google drive</hash><br>
	drive.mount(<links>'/content/gdrive'</links>)
</div>
<div class="comments">
	I've made sure that the dataframe <b>Book.xlsx</b> is in the same location at my Google Colab file 
	so that I can easily locate and read it using the function <code>.read_excel()</code>. In the second line of the following code
	I have named the dataframe <b>Books_df</b>.
</div>
<div class="code">
	path=<links>'/content/gdrive/MyDrive/Website/Books.xlsx'</links> <br>
	Books_df = pd.read_excel(path)
</div>
<div class="comments">
	Then I will import the font <b>DM Sans</b>. I've done this by downloading the font files (in weights Regular, Medium and Bold) from Google Fonts and 
	copying the files into my Google Drive which I can then read like this...
</div>
<div class="code">
	!wget <links>'/content/gdrive/MyDrive/Website/DM_Sans/DMSans-Regular.ttf'</links><br>
	!wget <links>'/content/gdrive/MyDrive/Website/DM_Sans/DMSans-Medium.ttf'</links><br>
	!wget <links>'/content/gdrive/MyDrive/Website/DM_Sans/DMSans-Bold.ttf'</links><br>
	<br>
	fm.fontManager.addfont(<links>'/content/gdrive/MyDrive/Website/DM_Sans/DMSans-Regular.ttf'</links>)<br>
	fm.fontManager.addfont(<links>'/content/gdrive/MyDrive/Website/DM_Sans/DMSans-Medium.ttf'</links>)<br>
	fm.fontManager.addfont(<links>'/content/gdrive/MyDrive/Website/DM_Sans/DMSans-Bold.ttf'</links>)<br>
	<br>
	mpl.rc('font', family='DM Sans')
</div>
<div class="comments">
	Now I can use the <code>.head()</code> function to read the first few rows in the dataframe!
</div>
<div class="code">
	Books_df.head(3)
</div>
<div class="comments">
<table>
  <thr>
    <th> </th>
    <th>Title</th>
    <th>No. of pages</th>
    <th>Year published</th>
	  <th>Genre</th>
	  <th>Month</th>
	  <th>Year I read it</th>
	  <th>My rating</th>
  </thr>
  <tr>
    <td>0</td>
    <td>Becoming</td>
    <td>573</td>
    <td>2018</td>
	  <td>Autobiography</td>
	  <td>1</td>
	  <td>2021</td>
	  <td>3</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Spoon Fed</td>
    <td>181</td>
    <td>2020</td>
	  <td>Nutrition</td>
	  <td>1</td>
	  <td>2021</td>
	  <td>3</td>
  </tr>
  <tr>
    <td>2</td>
    <td>A Short History of Nearly Everything</td>
    <td>676</td>
    <td>2003</td>
	  <td>Encyclopedia</td>
	  <td>2</td>
	  <td>2021</td>
	  <td>3</td>
  </tr>
</table>
</div>
<div class="comments">
	Some of these column titles aren't great so I will rename them!
</div>
<div class="code">
	Books_df.rename(columns={<links>"No. of pages"</links>: <links>"Pages"</links>, 
                         <links>"Year published"</links>: <links>"Year_publ"</links>, 
                         <links>"Year I read it"</links> : <links>"Year_read"</links>, 
                         <links>"My rating" </links>: <links>"Rating"</links>},
                          inplace = True)
	<br><br>Books_df.head(1)
</div>
<div class="comments">
	<table>
  <thr>
    <th> </th>
    <th>Title</th>
    <th>Pages</th>
    <th>Year_publ</th>
	  <th>Genre</th>
	  <th>Month</th>
	  <th>Year_read</th>
	  <th>Rating</th>
  </thr>
  <tr>
    <td>0</td>
    <td>Becoming</td>
    <td>573</td>
    <td>2018</td>
	  <td>Autobiography</td>
	  <td>1</td>
	  <td>2021</td>
	  <td>3</td>
  </tr>
</table>
</div>

<div class="comments">
	<h20>Now I can start plotting!</h20><br>
	<p20>Below are a few examples of what I've made with this dataframe (click to expand!).</p20>
</div>

<div class="plotsgrid"> 
<div class="plotname">
  <div class="graph3">
  </div>
    <div class="name" href="#" onclick="toggle()">
      Basic scatter plots
    </div>
 </div>

<div class="plotname">
  <div class="graph1">
  </div>
    <div class="name" href="#" onclick="toggle2()">
      Polynomial lines of best fit
    </div>
 </div>  
  
<div class="plotname">
  <div class="graph2">
  </div>
    <div class="name" href="#" onclick="toggle3()">
      Creating new dataframes
    </div>

</div>
</div>


<div id="popup">
<div class="popupoutline">
	<div class="comments2">
		<h21>Basic Scatter Plots</h21><br>
		First I started with a basic scatter plot. In the below code, I have defined a few characteristics of the plot's basic aesthetics 
		and then used <code>plt.scatter</code> to create my scatter plot. To plot a column from the dataframe, 
		<i>Pandas</i> uses the notation <code>dataframe['column_title']</code>. 
	</div>
	<div class="code2">
<hash># set up plot with grey background and dashed grid lines</hash><br><br>
ax = plt.axes()<br>
ax.set_facecolor('#FAFAFA')<br>
plt.grid(axis = 'y', linestyle='dashed', color='#ccc', zorder=1)<br><br>
<hash># keep only bottom plot outline and remove ticks along axis</hash><br><br>
ax.spines[['top', 'right', 'left']].set_visible(False)<br>
ax.spines[['bottom']].set_linewidth(1.4)<br>
plt.tick_params(left = False)<br>
plt.tick_params(bottom = False)<br><br>
<hash># change x-axis tick intervals and edit both axis limits</hash><br><br>
plt.xticks(np.arange(2021, 2026, 1))<br>
plt.xlim(2020.9, 2025.1)<br>
plt.ylim(20, 750)<br><br>
<hash># axis and plot titles</hash><br><br>
plt.xlabel('Year', labelpad=10, fontsize=12, weight='medium')<br>
plt.ylabel('Number of pages', labelpad=10, fontsize=12, weight='medium')<br>
plt.title('BOOK LENGTH', loc='left', fontsize=16, weight='bold', y=1.02)<br><br>
<hash># scatter plot</hash><br><br>
plt.scatter(Books_df[<links>'Year_read'</links>], Books_df[<links>'Pages'</links>])
	</div>	
	<div class="comments2">
	<div class="container_graph">
		<div class="graph_container">
		</div>
	</div>
	</div>
	<div class="comments2">
		<p20>This is a bit boring and doesn't show very much information! First, to spread out the data a bit, I'll incorporate the <code>Month</code> column to create
		a new column with a decimal-year value. Then I'll use the <code>plt.scatter</code> argument <code>s=</code> to alter the size of the data points. For this example, I will choose
		the <code>Rating</code> column to define the scatter sizes. <br>
		Finally, I'll asign each <code>Genre</code> a different hex code so that I can change the colours of the data points (using the <code>c=</code>
		argument in <code>plt.scatter</code>).</p20>	
	</div>
	<div class="code2">
		<hash># Step One</hash><br><br>
		Books_df[<links>'MonthYear'</links>] = Books_df[<links>'Year_read'</links>] + Books_df[<links>'Month'</links>] / 12 <br><br>
		<hash># Step Two</hash><br><br>
		plt.scatter(Books_df[<links>'MonthYear'</links>], Books_df[<links>'Pages'</links>], s=(Books_df[<links>'Rating'</links>]**3)*2) >br><br>
		<hash># Step Three, first find the Genre names</hash><br><br>
		genres = pd.unique(Books_df[<links>'Genre'</links>])<br>
		print(genres)<br>
		<hash># Fiction (purple shades)</hash><br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Classics', <links>'Colour'</links>] = '#A5AFFB'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Fiction', <links>'Colour'</links>] = '#7887F7'<br>
<hash># Science (yellow shades)</hash><br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Encyclopedia', <links>'Colour'</links>] = '#F4F2B9'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Nutrition', <links>'Colour'</links>] = '#EEEB95'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Physics', <links>'Colour'</links>] = '#E9E572'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Space', <links>'Colour'</links>] = '#E6E260'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Natural Sciences', <links>'Colour'</links>] = '#F9F8DC'<br>
<hash># Other (pink shades)</hash><br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Autobiography', <links>'Colour'</links>] = '#F88CC0'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Design', <links>'Colour'</links>] = '#F99FCA'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Feminist', <links>'Colour'</links>] = '#FAB2D5'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Philosophy', <links>'Colour'</links>] = '#FBC5E0'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'History', <links>'Colour'</links>] = '#F88CC0'<br>
Books_df.loc[Books_df[<links>'Genre'</links>] == 'Sport', <links>'Colour'</links>] = '#FDECF5'
		
	</div>
</div>
</div>
<div id="popup2">
 hello again
</div>
<div id="popup3">
 hello again again
</div>










<div class="footer">
  last updated: 15th September 2024
</div>


<style>
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Dela+Gothic+One&family=Karla:ital,wght@0,200..800;1,200..800&family=Martian+Mono:wght@100..800&family=Sankofa+Display&family=Spline+Sans+Mono:ital,wght@0,300..700;1,300..700&family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap');
.popupoutline{
	border-top: 1px solid #CCCCCC;
	border-bottom: 1px solid #CCCCCC;
	margin: 10px 160px;
	padding: 30px 40px;
}
output{
  font-family: Spline Sans Mono;
  font-weight: normal;
  font-size: 1em;
}
.container_graph{
	margin: 10px 0px;
	display: grid;
  	grid-template-columns: 1fr 2fr 1fr;
        gap: 10px;
	width: 100%;
	padding: 15px 0px;
	border-radius: 15px;
	border: 1px solid #ccc;
}
.graph_container{
  background-size: contain;
  grid-column: 2;
  border-radius: 20px;
  padding: 0px;
  background-image: url('../images/3_1.png');
  width: 100%;
  aspect-ratio: 4/3;
  background-repeat: no-repeat;
	background-position: center;
}
p20{
	font-family: DM Sans;
	font-size: 1em;
	line-height: 1.5em;
}
h20{
	font-family: DM Sans;
	font-size: 1.5em;
	margin: 30px 0px 10px 0px;
	font-weight: bold;
	line-height: 2em;
}
h21{
	font-family: DM Sans;
	font-size: 1.3em;
	margin: 10px 0px 10px 0px;
	font-weight: bold;
	line-height: 1.8em;
}
.graph1{
  background-image: url('../images/1.png');
  width: 100%;
  aspect-ratio: 4/3;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  margin: 10px auto;
}
.graph2{
  background-image: url('../images/2.png');
  width: 100%;
  aspect-ratio: 4/3;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  margin: 10px auto;
}
.graph3{
  background-image: url('../images/3.png');
  width: 100%;
  aspect-ratio: 4/3;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  margin: 10px auto;
}
.plotsgrid{
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  margin: 10px 180px;
  gap: 30px;
}
.plotname{
  display: grid;
  grid-template-rows: auto auto;
    border-radius: 15px;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0);
    align-items: center;
    transition: 0.4s;
    color: #000000;
  padding: 20px;
  }
  .name{
    font-family: 'DM Sans';
    font-size: 1.2em;
    text-align: center;
    font-weight: normal;
	  padding: 10px;
    margin-top: 10px;
    margin-bottom: 10px;
	  border-radius: 15px;
	  background-color: #F3F4FF;
	  transition: 0.3s;
  }
  .name:hover{
    background-color: #E2E5FF;
    cursor: pointer;
  }

#popup{
  padding: 0px;
  margin: 0px;
  height: 0px;
  background: #fff;
  visibility: hidden;
  opacity: 0;
  transition: 0.4s;
  z-index: 999;
  align-items: center;
  display: flex;
  flex-wrap: wrap;
}

#popup.active{
  padding: 0px;
  height: auto;
  visibility: visible;
  margin: 0px;
  opacity: 1;
}
#popup2{
  padding: 0px;
  margin: 0px;
  height: 0px;
  background: #fff;
  visibility: hidden;
  opacity: 0;
  transition: 0.4s;
  z-index: 999;
  align-items: center;
  display: flex;
  flex-wrap: wrap;
}

#popup2.active{
  padding: 0px;
  height: auto;
  visibility: visible;
  margin: 0px;
  opacity: 1;
}
#popup3{
  padding: 0px;
  margin: 0px;
  height: 0px;
  background: #fff;
  visibility: hidden;
  opacity: 0;
  transition: 0.4s;
  z-index: 999;
  align-items: center;
  display: flex;
  flex-wrap: wrap;
}

#popup3.active{
  padding: 0px;
  height: auto;
  visibility: visible;
  margin: 0px;
  opacity: 1;
}	
table {
  margin: 20px 0px;
  border-collapse: collapse;
  width: 100%;
}
th {
  padding: 8px 15px;
  font-family: 'Spline Sans Mono';
  text-align: left;
  border-bottom: 2px solid #FFFFFF;
  background: #CDD2FF;
}
td {
  padding: 4px 15px;
  font-family: 'DM Sans';
  text-align: left;
  vertical-align: text-top;
  border-bottom: 1px solid #FFFFFF;
}
tr{
	background-color: #EAECFF;
}
tr:hover {background-color: #DDE1FF;}
.comments{
	text-align: justify;
  	text-justify: inter-word;
	margin: 10px 180px;
	font-family: DM Sans;
}
.comments2{
	text-align: justify;
  	text-justify: inter-word;
	margin: 0px;
	font-family: DM Sans;
}
.code{
  border-radius: 10px;
  margin: 25px 200px 25px 200px;
  font-family: 'Spline Sans Mono';
  font-size: 0.9em;
  line-height: 1.4em;
  justify-content: left;
  text-align: left;
  padding: 30px 30px;
  background-color: #F6F6F6;
}
.code2{
  border-radius: 10px;
  margin: 20px;
  font-family: 'Spline Sans Mono';
  font-size: 0.9em;
  line-height: 1.4em;
  justify-content: left;
  text-align: left;
  padding: 30px 30px;
  background-color: #F6F6F6;
}
hash{
	color: #CCCCCC;
}
code{
	font-family: Spline Sans Mono;
	background-color: #F5F5F5;
}
links{
	color: #FF7EBC;
}
note{
	color: #CCC;
}
</style>
<script>
	function toggle(){
    var popup = document.getElementById('popup');
    popup.classList.toggle('active');
  }
    function toggle2(){
    var popup = document.getElementById('popup2');
    popup.classList.toggle('active');
  }
    function toggle3(){
    var popup = document.getElementById('popup3');
    popup.classList.toggle('active');
  }
</script>
